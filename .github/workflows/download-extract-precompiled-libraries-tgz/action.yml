name: "Download extract .tgz precompiled libraries"
description: "Download and extract .tgz precompiled libraries from antares-deps and antares-simulator repository"
inputs:
  antares-deps-version:
    description: 'antares-deps version'
    required: true
  os:
    description: 'operational system used for github action'
    required: true  
  os-full-name:
    description: 'full operational system name used (for example Centos-7.9.2009 or Ubuntu-20.04'
    required: true
  buildtype:
    description: 'build type'
    required: false
    default: 'Release'

runs:
  using: "composite"
  steps: 
  - name: Download & extract antares-deps
    shell: bash
    run: |
           wget https://github.com/AntaresSimulatorTeam/antares-deps/releases/download/v${{inputs.antares-deps-version}}/rte-antares-deps-${{inputs.os}}-${{inputs.buildtype}}.tar.gz
           tar -xvf rte-antares-deps-${{inputs.os}}-${{inputs.buildtype}}.tar.gz
           rm -rf rte-antares-deps-${{inputs.os}}-${{inputs.buildtype}}.tar.gz

  - name: Read OR-Tools tag
    shell: bash
    run: |
           TAG=$(cat "${{ github.workspace }}/ortools_tag")
           echo "ortools-tag=${TAG}" >> ${GITHUB_ENV}

  - name: Download & extract OR-Tools
    shell: bash
    run: |
           wget https://github.com/rte-france/or-tools/releases/download/${{ env.ortools-tag }}/ortools_cxx_${{ inputs.os }}_static_sirius.zip -O ortools.zip
           unzip ortools.zip
           rm ortools.zip
