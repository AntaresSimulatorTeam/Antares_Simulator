cmake_minimum_required(VERSION 3.5)

project(@GIT_DEP_NAME@ NONE)

include(ExternalProject)

ExternalProject_Add(${PROJECT_NAME}_project
  TMP_DIR "@CMAKE_CURRENT_BINARY_DIR@/${PROJECT_NAME}/tmp"
  STAMP_DIR "@CMAKE_CURRENT_BINARY_DIR@/${PROJECT_NAME}/stamp"
  DOWNLOAD_DIR "@CMAKE_CURRENT_BINARY_DIR@/${PROJECT_NAME}/download"
  SOURCE_DIR "@CMAKE_CURRENT_BINARY_DIR@/${PROJECT_NAME}/source"
  @BINARY_DIR@

  @SOURCE_SUBDIR@

  GIT_REPOSITORY "@GIT_DEP_REPOSITORY@"
  GIT_TAG "@GIT_DEP_TAG@"
  LOG_DOWNLOAD FALSE

  # UPDATE_COMMAND ""
  LOG_UPDATE FALSE

  PATCH_COMMAND @PATCH_CMD@
  #LOG_PATCH FALSE

  @CONFIGURE_COMMAND@
  CMAKE_ARGS
    -DCMAKE_PREFIX_PATH=@STR_CMAKE_PREFIX_PATH@
    -DCMAKE_INSTALL_PREFIX=@DEPS_INSTALL_DIR@
    -DCMAKE_BUILD_TYPE=@CMAKE_BUILD_TYPE@
    -DBUILD_SHARED_LIBS=OFF
    -DCMAKE_POSITION_INDEPENDENT_CODE:BOOL=ON
    -DBUILD_TESTING=OFF
    @GIT_DEP_CMAKE_ARGS@
    LOG_CONFIGURE FALSE

  LIST_SEPARATOR |

  @BUILD_COMMAND@
  LOG_BUILD FALSE

  @INSTALL_COMMAND@
  LOG_INSTALL FALSE

  TEST_COMMAND ""
  LOG_TEST FALSE
)
