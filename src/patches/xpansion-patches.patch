From fc15334cd69397f62b0f8c0867a567ab3a05b3d9 Mon Sep 17 00:00:00 2001
From: Abdoulbari Zakir <abdoulbari.zakir@gmail.com>
Date: Tue, 18 Jun 2024 17:01:51 +0200
Subject: [PATCH 1/3] remove gflags

Signed-off-by: Abdoulbari Zakir <abdoulbari.zakir@gmail.com>
---
 src/cpp/helpers/CMakeLists.txt | 1 -
 1 file changed, 1 deletion(-)

diff --git a/src/cpp/helpers/CMakeLists.txt b/src/cpp/helpers/CMakeLists.txt
index 325a463f..8df77d58 100644
--- a/src/cpp/helpers/CMakeLists.txt
+++ b/src/cpp/helpers/CMakeLists.txt
@@ -50,7 +50,6 @@ target_link_libraries (helpers
 	PUBLIC
 		${JSONCPP_LIB}
 		solvers
-		gflags::gflags
 		Boost::boost Boost::program_options
 		MINIZIP::minizip-ng
 )
-- 
2.39.2.windows.1


From 7bd3f2513d89fd8714686dd4213d49a0c44a86d9 Mon Sep 17 00:00:00 2001
From: Abdoulbari Zakir <abdoulbari.zakir@gmail.com>
Date: Tue, 18 Jun 2024 17:17:21 +0200
Subject: [PATCH 2/3] minizip-patch1

Signed-off-by: Abdoulbari Zakir <abdoulbari.zakir@gmail.com>
---
 src/cpp/helpers/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/cpp/helpers/CMakeLists.txt b/src/cpp/helpers/CMakeLists.txt
index 8df77d58..af98e171 100644
--- a/src/cpp/helpers/CMakeLists.txt
+++ b/src/cpp/helpers/CMakeLists.txt
@@ -51,5 +51,5 @@ target_link_libraries (helpers
 		${JSONCPP_LIB}
 		solvers
 		Boost::boost Boost::program_options
-		MINIZIP::minizip-ng
+		MINIZIP::minizip
 )
-- 
2.39.2.windows.1


From f4e8c153cf631ec37060c74ebc7cdbffa2ad505a Mon Sep 17 00:00:00 2001
From: Abdoulbari Zakir <abdoulbari.zakir@gmail.com>
Date: Tue, 18 Jun 2024 17:25:19 +0200
Subject: [PATCH 3/3] update minizip api version

Signed-off-by: Abdoulbari Zakir <abdoulbari.zakir@gmail.com>
---
 src/cpp/helpers/ArchiveReader.cpp | 2 +-
 src/cpp/helpers/ArchiveWriter.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/cpp/helpers/ArchiveReader.cpp b/src/cpp/helpers/ArchiveReader.cpp
index 65cd7b49..eb8491d6 100644
--- a/src/cpp/helpers/ArchiveReader.cpp
+++ b/src/cpp/helpers/ArchiveReader.cpp
@@ -15,7 +15,7 @@ ArchiveReader::ArchiveReader(const std::filesystem::path& archivePath)
 ArchiveReader::ArchiveReader() : ArchiveIO() { Create(); }
 void ArchiveReader::Create() {
   std::unique_lock lock(mutex_);
-  mz_zip_reader_create(&pmz_zip_reader_instance_);
+  pmz_zip_reader_instance_ = mz_zip_reader_create();
 }
 
 int32_t ArchiveReader::Open() {
diff --git a/src/cpp/helpers/ArchiveWriter.cpp b/src/cpp/helpers/ArchiveWriter.cpp
index d90619e7..23c78b5a 100644
--- a/src/cpp/helpers/ArchiveWriter.cpp
+++ b/src/cpp/helpers/ArchiveWriter.cpp
@@ -18,7 +18,7 @@ ArchiveWriter::ArchiveWriter() : ArchiveIO() {
 
 void ArchiveWriter::Create() {
   std::unique_lock lock(mutex_);
-  mz_zip_writer_create(&pmz_zip_writer_instance_);
+  pmz_zip_writer_instance_ = mz_zip_writer_create();
 }
 void ArchiveWriter::InitFileInfo() {
   fileInfo_.compression_method = MZ_COMPRESS_METHOD_DEFLATE;
-- 
2.39.2.windows.1

